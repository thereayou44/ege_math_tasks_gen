# Генератор задач ЕГЭ по математике

Веб-приложение для генерации тренировочных задач ЕГЭ по математике с использованием искусственного интеллекта, включая визуализацию геометрических фигур и графиков функций.

## Описание

Проект представляет собой веб-приложение, позволяющее генерировать тренировочные задачи по математике для подготовки к ЕГЭ с использованием модели Yandex GPT. 

### Основные возможности:
- Генерация задач разных типов и уровней сложности
- Получение полного решения задач
- Возможность получения пошаговых подсказок
- Поддержка базового и профильного уровней ЕГЭ
- Автоматическая визуализация геометрических задач и графиков функций
- Поддержка генерации нескольких графиков на одном полотне (для задач на анализ графиков)
- Интеллектуальное определение размеров геометрических фигур из текста задачи

### Категории задач:
- Алгебраические уравнения и неравенства
- Тригонометрические уравнения и выражения
- Логарифмические и показательные уравнения
- Планиметрия и стереометрия с визуализацией
- Анализ графиков функций с визуализацией
- Текстовые задачи и задачи на оптимизацию
- Задачи с параметрами

## Структура проекта

```
/
├── app/                       # Основной код приложения
│   ├── __init__.py           
│   ├── routes.py              # Flask маршруты
│   ├── task_generator.py      # Логика генерации задач
│   ├── prompts/               # Промпты для AI
│   │   ├── __init__.py        # Функции создания промптов
│   │   └── prompts.py         # Шаблоны промптов
│   ├── geometry/              # Классы и функции для геометрических фигур
│   │   ├── __init__.py
│   │   ├── base.py            # Базовый класс для геометрических фигур
│   │   ├── trapezoid.py       # Класс трапеции
│   │   ├── rectangle.py       # Класс прямоугольника
│   │   ├── parallelogram.py   # Класс параллелограмма
│   │   └── circle.py          # Класс окружности
│   ├── visualization/         # Функции визуализации
│   │   ├── __init__.py
│   │   ├── renderer.py        # Отрисовка геометрических фигур
│   │   └── chart_utils.py     # Утилиты для построения графиков и диаграмм
│   ├── utils/                 # Вспомогательные функции
│   │   ├── __init__.py
│   │   ├── converters.py      # Конвертеры форматов
│   │   └── parsers.py         # Парсеры текста и LaTeX
│   └── models/                # Модели данных
│       ├── __init__.py
│       └── categories.py      # Структуры данных категорий
│
├── data/                      # Управление данными
│   ├── categories/            # Файлы с данными категорий
│   └── problems/              # Наборы задач
│
├── scripts/                   # Вспомогательные скрипты
│   ├── download_mathb_problems.py  # Скачивание задач
│   └── generate_categories_list.py # Генерация списка категорий
│
├── static/                    # Статические ресурсы
│   ├── css/                   # Стили
│   ├── js/                    # Клиентские скрипты
│   └── images/                # Изображения
│       └── generated/         # Сгенерированные визуализации
│
├── templates/                 # Flask шаблоны
│
├── tests/                     # Тесты
│   ├── __init__.py
│   ├── run_all_tests.py       # Запуск всех тестов
│   ├── test_task_generator.py # Тесты для генератора задач
│   ├── test_visualization.py  # Тесты для визуализации
│   ├── test_parsers.py        # Тесты для парсеров
│   ├── test_format_converters.py # Тесты для конвертеров
│   └── quality_tests/         # Тесты качества генерации задач
│
├── app.py                     # Точка входа в приложение
├── requirements.txt           # Зависимости проекта
├── run_tests_guide.md         # Руководство по тестированию
└── README.md                  # Данный файл
```

## Особенности визуализации

Приложение поддерживает автоматическую визуализацию математических задач:

### Геометрические фигуры:
- Треугольники (произвольные, равнобедренные, прямоугольные)
- Прямоугольники и квадраты
- Трапеции (произвольные и равнобедренные)
- Параллелограммы
- Окружности

#### Улучшения в визуализации геометрических фигур:
- Автоматическое определение размеров фигур из текста задачи
- Ограничение на количество вершин (не более 4) для всех типов фигур
- Интеллектуальное отображение длин сторон (показываются только если известны из задачи)
- Корректное отображение углов и сторон для всех типов фигур

### Графики функций:
- Построение графиков с настраиваемыми параметрами
- Поддержка различных типов функций (полиномиальные, тригонометрические, логарифмические и др.)
- Поддержка нескольких графиков на одном полотне
- Настраиваемые цвета, легенды и диапазоны осей

## Установка и запуск

### Предварительные требования

- Python 3.8 или выше
- API-ключ Yandex GPT (для генерации задач)
- Установленные библиотеки для работы с изображениями (matplotlib, pillow)
- Установленные библиотеки для работы с математическими выражениями (sympy, numpy)

### Настройка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/ege-math-tasks-gen.git
cd ege-math-tasks-gen
```

2. Создайте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте файл .env в корневой директории и добавьте ваши API-ключи:
```
YANDEX_API_KEY=ваш_ключ_api
YANDEX_FOLDER_ID=ваш_folder_id
```

### Запуск приложения

```bash
python app.py
```

После запуска откройте в браузере адрес http://localhost:5001

## API

Приложение предоставляет API для генерации задач:

- `GET /api/task` - генерация задачи с параметрами
- `GET /api/json_task` - генерация задачи в формате JSON
- `POST /api/generate_markdown_task` - генерация задачи в формате Markdown

## Тестирование

Для запуска всех тестов выполните:

```bash
python -m tests.run_all_tests
```

Подробное руководство по тестированию доступно в файле `run_tests_guide.md`.

## Лицензия

Этот проект распространяется под лицензией MIT. См. файл LICENSE для получения дополнительной информации.
