# Тесты качества для генератора математических задач ЕГЭ

Эта директория содержит тесты для оценки качества генерируемых задач ЕГЭ. Основное внимание уделяется проверке уравнений и неравенств.

## Основные компоненты

- **test_equations.py** - Тесты для оценки качества генерации уравнений
- **test_inequalities.py** - Тесты для оценки качества генерации неравенств
- **run_quality_tests.py** - Скрипт для запуска всех тестов качества

## Возможности парсера математических выражений

Недавние улучшения в парсере позволяют корректно обрабатывать следующие типы выражений:

### Для уравнений

- ✅ Корректная обработка отрицательных чисел и отрицательных дробей (`-\frac{a}{b}`)
- ✅ Поддержка степеней в LaTeX формате `a^{bx+c}`
- ✅ Обработка тригонометрических выражений с константой `\pi`
- ✅ Автоматическое исправление несбалансированных скобок
- ✅ Поддержка логарифмов с коэффициентами (например, `2\log_3(2)`)
- ✅ Преобразование вложенных математических конструкций
- ✅ Обработка сложных дробей с корнями (например, `\frac{1 + \sqrt{133}}{2}`)
- ✅ Корректная обработка десятичных чисел с запятой вместо точки (например, `0,5` -> `0.5`)
- ✅ Корректное извлечение корней из ответов (например, `\sqrt{35}`)
- ✅ Улучшенная обработка тригонометрических выражений с `\pi` внутри аргумента

### Для неравенств

- ✅ Корректная обработка дробей в интервалах (`a/b`)
- ✅ Поддержка отрицательных границ интервалов (`[-2, 3]`)
- ✅ Поддержка степеней в LaTeX формате `a^{bx+c}`
- ✅ Обработка тригонометрических выражений с константой `\pi`
- ✅ Автоматическое исправление несбалансированных скобок
- ✅ Автоматическое выявление интервалов в различных форматах записи (`[a,b]`, `(a,b)`, `x > a`, `x < b`)
- ✅ Поддержка объединения интервалов (`x <= a или x >= b`)
- ✅ Корректная обработка десятичных чисел с запятой вместо точки
- ✅ Улучшенное извлечение неравенств из LaTeX-выражений

## Улучшенная логика проверки ответов

- ✅ Гибкая проверка уравнений: успешным считается наличие хотя бы одного корректного ответа 
- ✅ Проверка на частичное совпадение множеств решений для неравенств
- ✅ Обработка специальных случаев для бесконечных интервалов в неравенствах
- ✅ Проверка точек из ответа на соответствие решению неравенства

## Запуск тестов

Для запуска всех тестов качества используйте:

```bash
python -m tests.quality_tests.run_quality_tests
```

## Новые возможности

1. Добавлено отслеживание статистики выполнения тестов
2. Сохранение информации о неудачных тестах для дальнейшего анализа
3. Вывод общей статистики тестирования в конце работы скрипта
4. Более гибкие алгоритмы проверки соответствия ответов решениям Sympy
5. Расширенная диагностика с подробным логированием процесса проверки

## Структура отчета 

После выполнения тестов качества будет выведена следующая информация:

- Общее количество проверенных задач
- Число успешно распознанных задач (корректно извлечены уравнения/неравенства и ответы)
- Число корректно верифицированных задач
- Процент успешных тестов

## Дальнейшие улучшения

Планируется добавить:

1. Более детальный анализ ошибок в процессе парсинга
2. Расширение поддержки для более сложных математических выражений
3. Визуализация результатов тестирования
4. Автоматическое обновление базы тестовых примеров
5. Поддержка параметрических ответов и ответов с переменными 